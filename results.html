<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
	<script type="text/javascript">
		$(window).on('scroll', function(){
		if($(window).scrollTop()){
			$('nav').addClass('black');
		}
		else {
			$('nav').removeClass('black');
		}
	})
	</script>
</head>
<body>
    <div>
        <div class="wrapper">
            <nav>
                <ul>
                    <img class="topleft" src="Toast.png" alt="logo" style="width:200px;height:100px;">
                    <li><a href="index.html">TOAST</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="main">
            <span>
                <h1 style="color: #c42c00;">Translated Results</h1>
                <span style="color: #c42c00;"><strong>&nbsp;&nbsp;â†’ Translation Confidence: </strong><span id="confidenceAverage"></span><strong> out of 10</strong></span>
            </span>
            <br/>
            <br/>
            <br/>
            <div class="box-around-results">
                <h2><span style="text-decoration: underline;"><strong>Summary</strong></span>:</h2>
                <p><strong>Important Facts</strong></p>
                <ul>
                <p id="bulletedTerms"></p>
                </ul>
                <p><strong>Symbolic Summary</strong></p>
                <div class="container" style="display:none;" id="c_id_35_36_remove_account.png">            
                    <img src="icons_vignettes/id_35_36_remove_account.png" style="display:none;" id="id_35_36_remove_account.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_35_36_remove_account.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_11_not_liable_loss.png">            
                    <img src="icons_vignettes/id_11_not_liable_loss.png" style="display:none;" id="id_11_not_liable_loss.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_11_not_liable_loss.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_10_do_not_misuse.png">            
                    <img src="icons_vignettes/id_10_do_not_misuse.png" style="display:none;" id="id_10_do_not_misuse.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_10_do_not_misuse.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_4_offensive.png">            
                    <img src="icons_vignettes/id_4_offensive.png" style="display:none;" id="id_4_offensive.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_4_offensive.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_0_30_legal_guardian.png">            
                    <img src="icons_vignettes/id_0_30_legal_guardian.png" style="display:none;" id="id_0_30_legal_guardian.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_0_30_legal_guardian.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_5_responsible_own_content.png">            
                    <img src="icons_vignettes/id_5_responsible_own_content.png" style="display:none;" id="id_5_responsible_own_content.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_5_responsible_own_content.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_14_do_not_modify.png">            
                    <img src="icons_vignettes/id_14_do_not_modify.png" style="display:none;" id="id_14_do_not_modify.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" style="display:none; id="text_id_14_do_not_modify.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_15_do_not_interfere.png">            
                    <img src="icons_vignettes/id_15_do_not_interfere.png" style="display:none;" id="id_15_do_not_interfere.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_15_do_not_interfere.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_16_17_do_not_copy_reproduce.png">            
                    <img src="icons_vignettes/id_16_17_do_not_copy_reproduce.png" style="display:none;" id="id_16_17_do_not_copy_reproduce.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_16_17_do_not_copy_reproduce.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_18_reasonable_safeguards.png">            
                    <img src="icons_vignettes/id_18_reasonable_safeguards.png" style="display:none;" id="id_18_reasonable_safeguards.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_18_reasonable_safeguards.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_20_credit_card.png">            
                    <img src="icons_vignettes/id_20_credit_card.png" style="display:none;" id="id_20_credit_card.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_20_credit_card.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_21_no_refunds.png">            
                    <img src="icons_vignettes/id_21_no_refunds.png" style="display:none;" id="id_21_no_refunds.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_21_no_refunds.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_26_39_communication.png">            
                    <img src="icons_vignettes/id_26_39_communication.png" style="display:none;" id="id_26_39_communication.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_26_39_communication.png"></div>          
                    </div>
                </div>
                <div class="container" style="display:none;" id="c_id_35_36_remove_account.png">            
                    <img src="icons_vignettes/id_35_36_remove_account.png" style="display:none;" id="id_35_36_remove_account.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_35_36_remove_account.png"></div>          
                    </div>
                </div>

                <div class="container" style="display:none;" id="c_id_40_41_not_accurate.png>            
                    <img src="icons_vignettes/id_40_41_not_accurate.png" style="display:none;" id="id_40_41_not_accurate.png" width="100" height="100"> <br/> </img>
                    <div class="overlay">            
                        <div class="text" id="text_id_40_41_not_accurate.png"></div>          
                    </div>
                </div>
                <img src="icons_vignettes/id7_fullrights_vignette.JPG" style="display:none;" id="id7_fullrights_vignette.JPG" width="900" height="300"> <br/> </img>
                <img src="icons_vignettes/id25_respectothers_vignette.JPG" style="display:none;" id="id25_respectothers_vignette.JPG" width="900" height="300"> <br/> </img>
                <hr />
                <h2><span style="text-decoration: underline;"><strong>Complete Terms of Service:</strong></span></h2>
                <p id="completeTerms"></p>
                <script type="text/javascript">
                    var toastObjectArray = JSON.parse("<%- send_var %>");
                    console.log(toastObjectArray) //debug
                    var confidenceTotal = 0;
                    var confidenceTally = 0;

                    for (i = 0; i < toastObjectArray.length; i++) {
                        //Check for highlighting => highlight and add to bullet points & full summary
                        if (toastObjectArray[i].isHighlight && toastObjectArray[i].phrase != undefined) {
                            
                            //add to complete terms print
                            //if it's a pull quote, center and bold. otherwise, add plain
                            if (toastObjectArray[i].UIType == 'Pull Quotes and Factoids') {
                                document.getElementById("completeTerms").innerHTML += "<br/>" + "<center>" + "<b>" + "<i>" + toastObjectArray[i].sentence + "." + "</center>" + "</b>" + "</i>" + "<br/>";
                            }
                            else {
                                document.getElementById("completeTerms").innerHTML += "<mark>" + toastObjectArray[i].sentence + "." + "</mark>" + "<br/>";
                            }
                            
                            //add to bullet point summary
                            document.getElementById("bulletedTerms").innerHTML += "<li>" + toastObjectArray[i].phrase + "</li>";
                            
                            //calculate confidence score
                            confidenceTotal = confidenceTotal + toastObjectArray[i].confidence;
                            confidenceTally++;
                            
                        }
                        
                        //Otherwise, leave alone and add to full summary only
                        else {
                            document.getElementById("completeTerms").innerHTML += toastObjectArray[i].sentence + "." + "<br/>"; 
                        }
                        
                        if (toastObjectArray[i].imageName != undefined && toastObjectArray[i].imageName != null) {
                            console.log(toastObjectArray[i].imageName) //debug
                            var imageNameString = toastObjectArray[i].imageName;
                            if (imageNameString) {
                                let image =  document.getElementById(imageNameString);
                                let imageText = document.getElementById("text_"+imageNameString)
                                let imageContainer = document.getElementById("c_"+imageNameString)
                                
                                console.log(image) //debug
                                console.log(imageText) //debug
                                console.log(imageContainer) //debug

                                if (image != null) {
                                    image.style.cssText = "display: block;";
                                }
                                if (imageText != null) {
                                    imageContainer.style.cssText = "display: block;";
                                    imageText.innerHTML = toastObjectArray[i].phraseTitle;
                                }
                            }
                        }
                        
                    }
                    document.getElementById("confidenceAverage").innerHTML = (confidenceTotal/confidenceTally).toFixed(2); 
                </script>
            </div>
       </div>
    </div>
</body>
